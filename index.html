<!DOCTYPE html>
<html lang="en" data-device="mobile">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GothAlienBoy: The Black Cube</title>
    
    <!-- PWA Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" sizes="192x192" href="assets/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-180.png">
    
    <!-- Mobile-Optimized Styles -->
    <link rel="stylesheet" href="style-mobile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Mobile Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700&family=Roboto+Mono:wght@300;400&display=swap" rel="stylesheet">
    
    <!-- Touch Detection -->
    <script>
        document.addEventListener('touchstart', function() {}, {passive: true});
        // Prevent zoom on double-tap
        document.addEventListener('dblclick', function(e) { e.preventDefault(); }, { passive: false });
    </script>
</head>
<body>
    <!-- Touch Screen Overlay (Prevents text selection) -->
    <div class="touch-overlay"></div>
    
    <!-- Mobile Status Bar -->
    <div class="mobile-status-bar">
        <div class="status-left">
            <span class="mobile-time" id="mobileTime">--:--</span>
            <span class="battery-indicator">
                <i class="fas fa-battery-three-quarters"></i>
                <span id="batteryLevel">84%</span>
            </span>
        </div>
        <div class="status-center">
            <span class="signal-indicator">
                <i class="fas fa-signal"></i>
                <span id="signalLevel">5G</span>
            </span>
        </div>
        <div class="status-right">
            <span class="resonance-mobile">
                <i class="fas fa-wave-square"></i>
                <span id="mobileResonance">0.3%</span>
            </span>
        </div>
    </div>
    
    <!-- Mobile Navigation (Bottom Bar - Thumb Accessible) -->
    <nav class="mobile-nav">
        <button class="nav-btn active" data-app="home">
            <i class="fas fa-home"></i>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-btn" data-app="terminal">
            <i class="fas fa-terminal"></i>
            <span class="nav-label">Terminal</span>
        </button>
        <button class="nav-btn" data-app="scanner">
            <i class="fas fa-satellite-dish"></i>
            <span class="nav-label">Scanner</span>
        </button>
        <button class="nav-btn" data-app="dreams">
            <i class="fas fa-moon"></i>
            <span class="nav-label">Dreams</span>
        </button>
        <button class="nav-btn" data-app="menu">
            <i class="fas fa-bars"></i>
            <span class="nav-label">Menu</span>
        </button>
    </nav>
    
    <!-- Main Game Container -->
    <main class="mobile-container" id="mobileContainer">
        
        <!-- Home Screen (Default View) -->
        <section class="mobile-screen active" id="screen-home">
            <div class="home-header">
                <div class="cube-animation">
                    <div class="cube-face-mobile front"></div>
                    <div class="cube-face-mobile back"></div>
                    <div class="cube-face-mobile right"></div>
                    <div class="cube-face-mobile left"></div>
                    <div class="cube-face-mobile top"></div>
                    <div class="cube-face-mobile bottom"></div>
                </div>
                <h1 class="game-title-mobile">GOTHALIENBOY</h1>
                <h2 class="game-subtitle">AND THE BLACK CUBE</h2>
            </div>
            
            <div class="mission-card">
                <h3><i class="fas fa-bullseye"></i> CURRENT MISSION</h3>
                <p id="currentMissionText">Initialize consciousness interface</p>
                <div class="mission-progress">
                    <div class="progress-bar-mobile">
                        <div class="progress-fill-mobile" id="missionProgress"></div>
                    </div>
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </div>
            
            <div class="quick-actions-grid">
                <button class="quick-action" data-action="scan" onclick="startQuickScan()">
                    <i class="fas fa-search"></i>
                    <span>Quick Scan</span>
                </button>
                <button class="quick-action" data-action="decode" onclick="openDecoder()">
                    <i class="fas fa-code"></i>
                    <span>Decoder</span>
                </button>
                <button class="quick-action" data-action="log" onclick="openDreamLog()">
                    <i class="fas fa-book"></i>
                    <span>Dream Log</span>
                </button>
                <button class="quick-action" data-action="map" onclick="openResonanceMap()">
                    <i class="fas fa-map"></i>
                    <span>Resonance Map</span>
                </button>
            </div>
            
            <div class="recent-discoveries">
                <h3><i class="fas fa-compass"></i> RECENT DISCOVERIES</h3>
                <div class="discoveries-list" id="discoveriesList">
                    <div class="discovery-item new">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>System initialized</span>
                        <small>Just now</small>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Terminal Screen -->
        <section class="mobile-screen" id="screen-terminal">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-terminal"></i> TERMINAL</h2>
                <button class="screen-menu-btn" onclick="toggleTerminalMenu()">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
            
            <div class="terminal-mobile">
                <div class="terminal-output-mobile" id="terminalOutputMobile">
                    <div class="terminal-line">
                        <span class="prompt-mobile">goth@cube:~$</span>
                        <span class="command-mobile">system_status --mobile</span>
                    </div>
                    <div class="terminal-response">
                        === GOTHALIENBOY PROTOCOL v1.0 ===<br>
                        Device: Mobile Interface<br>
                        Resonance: <span id="termResonance">0.3%</span><br>
                        Cube Proximity: âˆž<br>
                        Status: Initializing...<br>
                        <br>
                        Type 'help' for mobile commands
                    </div>
                </div>
                
                <div class="terminal-input-mobile">
                    <input type="text" id="mobileCommandInput" 
                           placeholder="Type command..." 
                           autocapitalize="none"
                           autocorrect="off"
                           spellcheck="false"
                           enterkeyhint="send">
                    <button class="send-btn" onclick="executeMobileCommand()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                
                <!-- Quick Command Buttons (Mobile Optimized) -->
                <div class="quick-commands">
                    <button class="cmd-btn" onclick="insertCommand('help')">help</button>
                    <button class="cmd-btn" onclick="insertCommand('scan local')">scan</button>
                    <button class="cmd-btn" onclick="insertCommand('status')">status</button>
                    <button class="cmd-btn" onclick="insertCommand('clear')">clear</button>
                </div>
            </div>
        </section>
        
        <!-- Frequency Scanner Screen -->
        <section class="mobile-screen" id="screen-scanner">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-satellite-dish"></i> FREQUENCY SCANNER</h2>
                <div class="scanner-controls">
                    <button class="scan-toggle" id="scanToggle" onclick="toggleScanner()">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            </div>
            
            <div class="scanner-visualization-mobile">
                <div class="frequency-display" id="frequencyDisplay">
                    <!-- Visual frequency display -->
                </div>
                <div class="frequency-readout-mobile">
                    <div class="readout-item-mobile">
                        <span>Current:</span>
                        <span class="value" id="currentFrequency">--.-- MHz</span>
                    </div>
                    <div class="readout-item-mobile">
                        <span>Strength:</span>
                        <span class="value" id="frequencyStrength">--%</span>
                    </div>
                    <div class="readout-item-mobile">
                        <span>Anomalies:</span>
                        <span class="value anomaly" id="anomalyCountMobile">0</span>
                    </div>
                </div>
            </div>
            
            <div class="scanner-targets">
                <h3>SCAN TARGETS</h3>
                <div class="target-grid">
                    <button class="target-btn" data-target="wifi" onclick="scanTarget('wifi')">
                        <i class="fas fa-wifi"></i>
                        <span>WiFi</span>
                    </button>
                    <button class="target-btn" data-target="bluetooth" onclick="scanTarget('bluetooth')">
                        <i class="fas fa-bluetooth"></i>
                        <span>Bluetooth</span>
                    </button>
                    <button class="target-btn" data-target="cellular" onclick="scanTarget('cellular')">
                        <i class="fas fa-broadcast-tower"></i>
                        <span>Cellular</span>
                    </button>
                    <button class="target-btn" data-target="ambient" onclick="scanTarget('ambient')">
                        <i class="fas fa-waves"></i>
                        <span>Ambient</span>
                    </button>
                </div>
            </div>
            
            <div class="detected-anomalies">
                <h3>DETECTED ANOMALIES</h3>
                <div class="anomalies-list" id="anomaliesList">
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <p>No anomalies detected yet</p>
                        <small>Start scanning to find hidden frequencies</small>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Dream Log Screen -->
        <section class="mobile-screen" id="screen-dreams">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-moon"></i> DREAM LOG</h2>
                <button class="new-entry-btn" onclick="newDreamEntry()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            
            <div class="dream-entries" id="dreamEntries">
                <div class="dream-entry">
                    <div class="dream-header">
                        <span class="dream-date">Last Night</span>
                        <span class="dream-lucidity high">92% Lucid</span>
                    </div>
                    <p class="dream-content">
                        I was floating in a void. A black cube rotated silently in the distance. 
                        It emitted no light but somehow cast shadows on nothingness. 
                        I tried to approach but the distance remained constant.
                    </p>
                    <div class="dream-tags">
                        <span class="dream-tag">Cube</span>
                        <span class="dream-tag">Void</span>
                        <span class="dream-tag">Recurring</span>
                    </div>
                </div>
            </div>
            
            <div class="dream-analysis">
                <h3>DREAM PATTERNS</h3>
                <div class="pattern-grid">
                    <div class="pattern-item">
                        <div class="pattern-icon">
                            <i class="fas fa-cube"></i>
                        </div>
                        <span class="pattern-count">3</span>
                        <small>Cube appearances</small>
                    </div>
                    <div class="pattern-item">
                        <div class="pattern-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <span class="pattern-count">78%</span>
                        <small>Lucidity avg.</small>
                    </div>
                    <div class="pattern-item">
                        <div class="pattern-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <span class="pattern-count">2:47</span>
                        <small>Avg. duration</small>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Mobile Menu Screen -->
        <section class="mobile-screen" id="screen-menu">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-cog"></i> SYSTEM MENU</h2>
            </div>
            
            <div class="menu-grid">
                <button class="menu-item" onclick="openApp('database')">
                    <i class="fas fa-database"></i>
                    <span>Lore Database</span>
                </button>
                <button class="menu-item" onclick="openApp('map')">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Resonance Map</span>
                </button>
                <button class="menu-item" onclick="openApp('chakras')">
                    <i class="fas fa-spa"></i>
                    <span>Chakra Alignment</span>
                </button>
                <button class="menu-item" onclick="openApp('settings')">
                    <i class="fas fa-sliders-h"></i>
                    <span>Settings</span>
                </button>
                <button class="menu-item" onclick="openApp('achievements')">
                    <i class="fas fa-trophy"></i>
                    <span>Achievements</span>
                </button>
                <button class="menu-item" onclick="openApp('help')">
                    <i class="fas fa-question-circle"></i>
                    <span>Help & Tutorial</span>
                </button>
            </div>
            
            <div class="player-stats-menu">
                <h3>YOUR STATS</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Resonance</span>
                        <span class="stat-value" id="menuResonance">0.3%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Puzzles Solved</span>
                        <span class="stat-value" id="puzzlesSolved">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Frequencies</span>
                        <span class="stat-value" id="frequenciesFound">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Play Time</span>
                        <span class="stat-value" id="playTime">0m</span>
                    </div>
                </div>
            </div>
            
            <div class="menu-footer">
                <button class="menu-btn save-btn" onclick="saveGame()">
                    <i class="fas fa-save"></i>
                    Save Game
                </button>
                <button class="menu-btn reset-btn" onclick="confirmReset()">
                    <i class="fas fa-redo"></i>
                    Reset
                </button>
            </div>
        </section>
        
        <!-- First Puzzle: Frequency Decoder -->
        <section class="mobile-screen puzzle-screen" id="screen-puzzle-1">
            <div class="puzzle-header">
                <button class="back-btn" onclick="showScreen('scanner')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>DECODE FREQUENCY 433.92MHz</h2>
                <div class="puzzle-progress">
                    <span id="puzzleProgress">0%</span>
                </div>
            </div>
            
            <div class="puzzle-container">
                <div class="puzzle-instruction">
                    <p>This frequency carries encrypted data. Drag the symbols to match the pattern shown in the reference.</p>
                </div>
                
                <div class="puzzle-area">
                    <div class="reference-pattern" id="referencePattern">
                        <!-- Reference pattern will be generated -->
                    </div>
                    
                    <div class="symbol-pool" id="symbolPool">
                        <!-- Draggable symbols -->
                    </div>
                    
                    <div class="target-grid-puzzle" id="targetGrid">
                        <!-- Drop targets -->
                    </div>
                </div>
                
                <div class="puzzle-controls">
                    <button class="puzzle-btn hint-btn" onclick="giveHint()">
                        <i class="fas fa-lightbulb"></i>
                        Hint
                    </button>
                    <button class="puzzle-btn reset-puzzle-btn" onclick="resetPuzzle()">
                        <i class="fas fa-undo"></i>
                        Reset
                    </button>
                    <button class="puzzle-btn submit-btn" onclick="submitPuzzle()">
                        <i class="fas fa-check"></i>
                        Submit
                    </button>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Mobile Notifications (Bottom Toast) -->
    <div class="mobile-notification" id="mobileNotification">
        <div class="notification-content">
            <i class="fas fa-info-circle"></i>
            <span id="notificationText">System initialized</span>
        </div>
        <button class="notification-close" onclick="hideNotification()">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- Touch Vibration Feedback (if supported) -->
    <audio id="touchSound" preload="auto">
        <source src="assets/sounds/tap.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Game Engine -->
    <script src="game-mobile.js"></script>
    
    <!-- Initialize on load -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initializeMobileGame();
        });
        
        // Prevent pull-to-refresh on mobile
        document.addEventListener('touchmove', function(e) {
            if(e.scale !== 1) e.preventDefault();
        }, { passive: false });
    </script>
</body>
</html>
